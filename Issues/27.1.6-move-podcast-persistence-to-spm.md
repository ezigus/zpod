# Issue 27.1.6: Move Podcast Persistence to SPM Package

**Status**: Open
**Priority**: P1 - High
**Created**: 2026-01-17
**Category**: Architecture / Modularization

## Description
Move `SwiftDataPodcastManager` and `PodcastEntity` from the app target (`zpod/Persistence/`) into `Packages/Persistence/Sources/Persistence/` to align with the documented package layering and enable reuse in extensions.

## Problem Statement
Persistence currently lives in the app target, which violates the intended module layering and limits reuse from extensions (CarPlay, widgets, intents). The original placement was chosen to avoid SwiftData macro issues; this should be validated and corrected within an explicit issue.

## Acceptance Criteria
- [ ] `SwiftDataPodcastManager.swift` moved to `Packages/Persistence/Sources/Persistence/`
- [ ] `PodcastEntity.swift` moved to `Packages/Persistence/Sources/Persistence/`
- [ ] `Packages/Persistence/Package.swift` declares required dependencies (CoreModels, SharedUtilities)
- [ ] App target links `Persistence` package and builds without app-local copies
- [ ] All imports updated and no duplicate types remain in app target
- [ ] Full regression passes (`./scripts/run-xcode-tests.sh`)
- [ ] Dev-log entry documents migration and any SwiftData macro constraints

## Spec References
- `zpod/spec/spec.md` (architecture layering expectations)
- `Issues/27.1-podcast-persistence-architecture.md`

## Dependencies
- Related: Issue 27.1.2 (Siri snapshot verification)
- Related: Issue 02.1.8 (CarPlay/Siri wiring)

## Testing Strategy
- Targeted build/test: `./scripts/run-xcode-tests.sh -b zpod -t IntegrationTests`
- Full regression: `./scripts/run-xcode-tests.sh`

## Notes
If SwiftData macro expansion fails across packages in the current toolchain, document the failure and keep the implementation in the app target with a dedicated README explaining the limitation.
