# Issue 02.6.3.1: Preflight Build Parallelization

**GitHub Issue**: [#135](https://github.com/ezigus/zpod/issues/135)  
**Parent Issue**: [#02.6.3](02.6.3-swipe-configuration-test-decomposition.md) â€“ SwipeConfiguration UI Test Decomposition  
**Status**: ðŸ†• Proposed  
**Created**: 2025-11-10  

## Context
Preflight currently performs a single `scripts/run-xcode-tests.sh -c -b all` invocation before any downstream jobs. That serial clean build now takes ~6â€“7 minutes and has become the pacing item whenever we iterate on the swipe suites. Earlier CI run #19231174453 failed inside this step, blocking the rest of the matrix. Splitting the build into smaller chunks (and/or enabling parallelism/caching) would cut critical-path time and make failures easier to isolate.

## Goals / Acceptance Criteria
1. **Modular preflight** â€“ The workflow should build required artifacts via multiple smaller steps (e.g., per-package matrix, host-app-only build) instead of a monolithic `-b all` invocation.
2. **No regression in artifacts** â€“ UI jobs must still download the same host app bundle(s) and succeed without additional setup.
3. **Runtime improvement** â€“ Document before/after preflight durations and show at least a 30% reduction in the time between workflow start and the first non-preflight job launching.
4. **Failure isolation** â€“ Each build chunk must surface its own logs/artifacts so future breakages identify the exact target that failed.

## Proposed Approach
- Analyze `scripts/run-xcode-tests.sh -b all` to determine natural build groupings (SwiftPM packages vs. workspace targets).
- Introduce a preflight matrix (or sequential steps) that builds these groups independently, publishing distinct artifacts (`host-app`, `packages/CoreModels`, etc.).
- Update downstream jobs (UI, unit, package tests) to consume the new artifact names/paths.
- Measure the new preflight timing across at least two CI runs; capture results in dev log + issue comment.

## Deliverables
- Updated `.github/workflows/ci.yml` (and any helper scripts) implementing the split builds.
- Dev-log entry summarizing the change and runtime comparison.
- GitHub issue comment closing the loop with metrics + validation.
