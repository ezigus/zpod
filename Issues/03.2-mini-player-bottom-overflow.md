# Issue 03.2: Mini Player Bottom Overflow – Tab Bar Navigation Blocked

**Status**: ✅ Complete (2026-01-01)

**Scope Update (2026-01)**: The mini-player is moving to a pill-based presentation. Ensure the pill and expanded mini-player continue to respect tab bar safe-area spacing; follow-up tracked in `03.1.1.6-mini-player-pill-reveal`.

**Priority**: High

**GitHub Issue**: [#259](https://github.com/ezigus/zpod/issues/259)

## Description

The mini player (now playing indicator) at the bottom of the screen overlaps with the tab bar and bottom navigation buttons, making tab bar navigation impossible or severely impaired. Users cannot reliably tap navigation tabs when the mini player is active.

**Impact**: Navigation is broken when playback is active. Users must pause or stop playback to switch tabs/screens.

## Visual Issue

The mini player displays:
- Episode artwork thumbnail
- Episode title
- Podcast name
- Playback controls (current time, play button, skip forward)

This floats above/overlaps the tab bar, making the tab buttons inaccessible.

## Root Cause

The mini player is likely rendered as an overlay without accounting for safe area insets at the bottom, or the main content views don't have bottom padding to accommodate the mini player's height.

## Acceptance Criteria

- ✅ Mini player does not overlap with tab bar buttons (safeAreaInset + tab bar height padding)
- ✅ All tab navigation buttons remain fully tappable when mini player is active (UI test added)
- ✅ Content scrolls properly and doesn't get hidden behind mini player (safe-area inset keeps layout clear)
- ✅ Bottom safe area is properly respected on devices with notches/Dynamic Island (tab bar height observer + safe area inset)
- ✅ Mini player positioning is consistent across all screens (Discover, Library, Search, etc.)

## Execution Plan

1. **Analysis**
   - Identify mini player implementation (likely in MiniPlayerView or PlaybackEnvironment)
   - Determine if issue is with container layout or mini player z-ordering
   - Check if main content has bottom padding/safeAreaInset handling

2. **Solutions (pick one)**
   - **Option A**: Add bottom padding to main content containers equal to mini player height
   - **Option B**: Move mini player into a fixed-position container with proper layering
   - **Option C**: Implement sheet-style mini player that doesn't overlap content

3. **Implementation**
   - Modify affected view containers
   - Add safe area handling for bottom inset
   - Test on multiple device sizes (SE, regular, Plus, with/without Dynamic Island)

4. **Testing**
   - Manual verification: Tab bar fully accessible with mini player active
   - Scroll test: Content doesn't disappear behind mini player
   - Device testing: iPhone 14, 15 (with Dynamic Island), SE
   - All screens: Discover, Library, Search, Playlist

## Files Likely Affected

- `MiniPlayerView.swift` (mini player presentation logic)
- `ContentView.swift` (main app container)
- Tab bar/navigation container views
- Individual feature views (DiscoverView, EpisodeListView, etc.)

## Dependencies

None - this is a standalone UI fix.

## Testing Strategy

- Manual testing on simulator (multiple device types)
- Visual regression testing (screenshots before/after)
- Navigation flow validation (all tabs accessible when playing)

## Deliverables

- Fixed mini player positioning/layout
- Bottom safe area properly handled
- All navigation fully accessible
- Updated screenshots in dev-log
