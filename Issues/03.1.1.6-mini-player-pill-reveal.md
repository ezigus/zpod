# Issue 03.1.1.6: Mini-Player Pill Reveal and Hidden-by-Default Presentation

**Status**: ðŸ†• Proposed

**Priority**: High

**Parent**: 03.1.1 Core Player Interface

**GitHub Issue**: TBD

## Description
Shift the mini-player from an always-visible bar to a hidden-by-default experience with a persistent pill handle. The pill should always be available (regardless of playback) and expand on swipe-up or tap to reveal the mini-player controls. The mini-player can be collapsed at any time without stopping playback.

## Background
The current mini-player occupies vertical space and can overlap content. The new approach keeps access to the mini-player always available while minimizing persistent height and removing overlap. It also clarifies that the mini-player is a compact control surface, while the full player is a separate, dedicated view.

## Acceptance Criteria

### Scenario 1: Pill Handle Always Available
- **Given** The app is launched on any tab
- **When** The main UI renders
- **Then** A minimal pill handle is visible above the tab bar
- **And** The pill does not obstruct tab bar taps or primary content
- **And** The pill has an accessibility label (e.g., "Show mini-player") and identifier

### Scenario 2: Expand Mini-Player
- **Given** The pill handle is visible
- **When** I swipe up on the pill or tap it
- **Then** The mini-player expands above the tab bar
- **And** If an episode is active, it shows artwork, titles, and transport controls
- **And** If no episode is active, it shows a neutral empty state with a secondary action to open the full player
- **And** The expanded mini-player increases the bottom safe-area inset so content is pushed up

### Scenario 3: Collapse Mini-Player
- **Given** The mini-player is expanded
- **When** I swipe down or tap a "Hide mini-player" control
- **Then** The mini-player collapses to the pill handle
- **And** Playback continues unchanged if audio is running

### Scenario 4: State Persists Across Tabs
- **Given** The mini-player is expanded or collapsed
- **When** I switch tabs or navigate within a tab
- **Then** The mini-player remains in the same presentation state

### Scenario 5: Access Full Player
- **Given** The mini-player is expanded
- **When** I tap the expand control
- **Then** The full player interface is shown and reflects the current playback state

## Implementation Notes
- Add a presentation state that is decoupled from playback (e.g., `collapsed` / `expanded`).
- Default to the collapsed pill on app launch and when playback state changes.
- Keep the pill visible even when playback is idle.
- Increase the bottom inset while expanded to avoid overlapping tab content.
- Provide explicit accessibility actions for show/hide to support VoiceOver.
- Use minimal safe-area inset for the pill; expanded state should sit above the tab bar without blocking it.

## Spec References
- `zpod/spec/spec.md` (User Interface and Experience: Mini-player access, dismissal, and full player access)

## Dependencies
- `03.1.1.1-mini-player-foundation` (base mini-player UI)
- `03.1.1.2-expanded-player-layout` (full player)
- `03.1.1.3-playback-state-synchronization` (shared playback state)

## Testing Strategy
- Unit tests for presentation-state transitions (collapsed/expanded).
- UI tests for pill visibility, swipe/tap expand and collapse, and persistence across tabs.
- Accessibility tests for pill controls and hide action.

## Deliverables
- Mini-player presentation controller (pill + expanded surface).
- Updated mini-player view to handle empty state when no episode is active.
- Updated ContentView layout for pill and expanded placement.
- Updated UI tests and `zpodUITests/TestSummary.md`.
