# Issue 03.1.1.1: Mini-Player Foundation

**GitHub Issue**: [#108](https://github.com/ezigus/zpod/issues/108)

## Priority
High

## Status
✅ Complete (2025-12-23)

**Completion Summary**:
- All 5 acceptance criteria fully implemented
- 13 unit tests + 4 UI tests, all passing
- Production-ready implementation
- Merged to main branch 2025-12-23

**Follow-up**: Issue 03.1.1.1.1 created for optional testing enhancements

## Description
Build the persistent mini-player that mirrors the active episode’s state and anchors the playback experience across the app. This slice covers the visual shell, navigation integration, and core play/pause & skip interactions surfaced from the compact bar. It sets the baseline for the expanded player and advanced controls delivered in follow-on issues.

## Acceptance Criteria
- Mini-player appears whenever an episode is playing or paused and hides when the queue is empty.
- Displays artwork thumbnail, episode title, podcast name, and basic transport controls (play/pause, skip forward/back).
- Supports tap-to-expand gesture that routes to the full player view via coordinator/navigation stack without disrupting the current tab.
- Persists across tab switches and push/pop navigation events while maintaining playback state.
- Provides basic haptic/visual feedback on control taps and respects VoiceOver labels.

## Implementation Notes
- Embed mini-player container above tab bar using safe-area aware layout to avoid gesture conflicts.
- Hook transport buttons into the existing playback engine façade (pause/play/skip) with Combine or async streams for state updates.
- Expose a lightweight view model that listens for playback state changes (episode, position, playing flag) and drives UI updates on the main actor.

## Dependencies
- Parent issue: [#107](https://github.com/ezigus/zpod/issues/107) (Core player interface).
- Playback engine façade from Issue 03 foundation (ensure basic play/pause APIs available).

## Testing Strategy
- Unit tests: mini-player view model state mapping (play/pause toggles, episode metadata updates).
- UI tests: launch playback, verify mini-player visibility, controls, and expand navigation.
- Snapshot tests (optional): validate compact layout with varying title lengths.

## Deliverables
- Mini-player SwiftUI view + view model integrated in the main app shell.
- Navigation hook for expand action.
- Tests and documentation updates as described.
