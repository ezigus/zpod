# Issue 03.1.4: Extend Settings Stack for macOS Support (Unit Testing Only)

## Priority
Medium

## Status
ðŸ†• Proposed

## Description
Add macOS support to the settings-related Swift packages (SettingsDomain, Persistence, CoreModels, SharedUtilities) **for unit testing purposes only**. This enables developers to run `swift test` locally on macOS for faster iteration during development, while keeping the zPod application itself iOS-only.

**Important**: This is NOT for running the zPod app on macOS - it's purely to improve the developer experience by enabling unit testing from the macOS environment.

## Acceptance Criteria
- Package manifests for SettingsDomain, Persistence, CoreModels, and SharedUtilities declare `.macOS(.v14)` (or newer) alongside existing platforms **for unit testing support only**.
- All source files in those packages compile for macOS without conditional compilation warnings (testing infrastructure only).
- Required macOS availability annotations or `#if canImport` guards are added to actor/ObservableObject code so builds remain warning-free on every platform.
- SwiftPM `swift test` succeeds for SettingsDomain and Persistence on macOS for improved developer workflow.
- `IntegrationTests` bundle is included in the shared Xcode scheme/test plan so `./scripts/run-xcode-tests.sh -t IntegrationTests` runs via xcodebuild.
- CI/workspace scripts continue to build iOS targets with no regressions and front-load a macOS leg that executes SettingsDomain, Persistence, and IntegrationTests for testing purposes.
- GitHub Actions workflow runs `zpod`, `zpodUITests`, and `IntegrationTests` in parallel jobs for the macOS testing leg.
- **The zPod app itself remains iOS/watchOS/CarPlay only** - no macOS app target or UI support.

## Specification References
- `spec/settings.md` â€” Global settings architecture expectations.
- `spec/ui.md` â€” Cross-platform considerations for settings UI.

## Dependencies
- Blocks none.
- Blocked by: none (pure infrastructure change).
- Related to Issue 02.1.6.3 (modular settings refactor) for future registry integration.

## Testing Strategy
- Run `swift build` and `swift test` for each affected package on macOS to verify unit testing functionality.
- Execute `./scripts/run-xcode-tests.sh -s` to confirm iOS builds remain green and app functionality unaffected.
- Spot-check a workspace build (`./scripts/run-xcode-tests.sh -b zpod`) to ensure no regression in iOS app targets.
- After wiring `IntegrationTests` into the scheme, run `./scripts/run-xcode-tests.sh -t IntegrationTests` and capture result bundles.
- Verify GitHub Actions matrix executes `zpod`, `zpodUITests`, and `IntegrationTests` jobs concurrently for comprehensive testing coverage.
- **Confirm that no macOS app targets are created** and the app remains iOS-only in all configurations.
