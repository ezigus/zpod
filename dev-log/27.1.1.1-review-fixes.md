# 2026-01-27 — Review Fixes Implementation Plan (Issue 27.1.1.1)

**Intent**
- Apply the seven agreed review fixes for SwiftData persistence parity, test helper consolidation, and lint health.

**Plan**
1) SwiftDataPodcastRepository: add hydrate helper, error logging, and document N+1 note.
2) InMemoryPodcastManager: align update() episode upsert with production semantics.
3) TestSupport Mocks: enrich MockEpisode factory and let MockPodcast accept episodes.
4) Persistence tests: switch to shared mocks; fix hardcoded podcastID; remove duplicate helpers.
5) Document code-quality change in dev-log and rerun targeted tests.

No code changes yet; proceed with TDD using package-level tests after refactors.

---

## 2026-01-27 — Implementation
- Added hydrate helper + error logging in `SwiftDataPodcastRepository`; noted N+1 in class doc.
- Aligned `InMemoryPodcastManager.update` with production upsert semantics (preserve user state).
- Consolidated episode/podcast test factories into `TestSupport.Mocks`, removed local helpers in persistence tests.
- Fixed hardcoded podcastID in `EpisodeEntityTests` and reused shared mocks.
- Targeted verification: `./scripts/run-xcode-tests.sh -t PersistenceTests,TestSupport` (pass).

## 2026-01-28 — Follow-up fixes from review
- Address stale-episode retention in `SwiftDataPodcastRepository.update` by deleting removed rows and adding regression coverage.
- Restore mock defaults and clarify normalization to avoid silent behavior changes (`MockPodcast.createSample`, `normalizeEpisodes` doc).
- Tighten EpisodeEntity safety docs/tests and add missing fetch error logging.
- Note mixed-scope commit (#30.3) on this branch for PR bookkeeping.

## 2026-01-28 — UI flake hardening (Trailing add button)
- Hardened `SwipeActionManagementTests` to scroll more aggressively to the trailing add button and assert scroll success before waiting for visibility. Verified locally on iPhone 17 Pro sim.
